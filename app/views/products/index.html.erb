<%= render partial: 'shared/header'%>


<div class="container-fluid">
  <h4 class="col-sm-2">View By: </h4> <%= form_for(:product, url: by_vendor_products_path, method: :get, class: "form-inline")  do |f| %>
    <div class="form-group col-sm-4">
      <%= f.label "Merchant: " %>
      <%= f.collection_select(:user_id, User.all, :id, :username, prompt: "View All" ) %>
      <%= f.submit "Go", class: "btn btn-primary" %>
    </div>
  <% end %>

  <%= form_for(:product, url: by_category_products_path, method: :get, class: "form-inline")  do |f| %>
    <div class="form-group col-sm-4">
      <%= f.label "Category: " %>
      <%= f.collection_select(:category_id, Category.all, :id, :name, prompt: "View All" ) %>
      <%= f.submit "Go", class: "btn btn-primary" %>
    </div>
  <% end %>
</div>



<div class="row">
  <% @products.each do |item| %>
    <div class="col-sm-4">

      <div class="product-card">
        <%= link_to(product_path(item)) do %>
          <%= image_tag(item.photo_url, alt: "Image of #{item.name}", height: 200, class: "center-block" ) %>
        <% end %>

        <div class="product-card-details">
          <h3 class="text-center">
            <%= item.name %>
            <br>
            <small><%= number_to_currency(item.price) %></small>
          </h3>

          <p><%= item.description %></p>
          <p>Merchant: <%= item.user.username %></p>
          <p>
            Categories: <% item.categories.each do |cat| %>
              <%= cat.name %>
            <% end %>
          </p>
        </div>
      </div>

    </div>
  <% end %>
</div>
